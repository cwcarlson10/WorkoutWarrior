<body class='home-page-background'>

  <h1 class="text-center"><%= @program.name %></h1>
   <% if current_user.trainer? %>
    <%= link_to "Edit", edit_program_path(@program), class: 'btn btn-danger btn-xs', remote: true %>
    <%= link_to "Delete Program", program_path(@program), class: 'btn btn-danger btn-xs pull-right', method: :delete, data: {confirm: "Are you sure you want to delete this program?"} %>
  <button class="btn btn-danger btn-xs"  data-dismiss="modal">
      Back
  </button>
  <% elsif current_user.athlete? %>
    <%= link_to 'Back', athlete_path(current_user.athlete), class: 'btn btn-danger btn-xs' %>
  <% end %>
  <div class='row'>
    <% @program.routines.each do |r| %>
      <div class='panel panel-default col-md-12'>
        <div class='panel-heading'>
         <h3 class='text-center'><%= r.exercise.title.upcase %></h3>
        </div>
        <div class='panel-body'>
          <dl class= 'dl-horizontal'>
          <% if r.exercise.description.present? %>
            <dt>Description:</dt>
            <dd><%= r.exercise.description.html_safe %></dd>
          <% end %>
          <% if r.sets.present? %>
            <dt>Sets:</dt>
            <dd><%= r.sets %></dd>
          <% end %>
          <% if r.reps.present? %>
            <dt>Reps:</dt>
            <dd><%= r.reps %></dd>
          <% end %>
          <% if r.duration.present? %>
            <dt>Duration:</dt>
            <dd><%= r.duration %></dd>
          <% end %>
          <% if r.instructions.present? %>
            <dt>Instructions:</dt>
            <dd><%= r.instructions %></dd>
          <% end %>
          </dl>
        </div>
    <% end %>
  </div>
    <div class="completed">
    <% if current_user.athlete? %>
      <%= simple_form_for @activity do |f| %>
        <%= f.input :feedback %>
        <%= f.association :program, value: @program.id, as: :hidden %>
        <%= f.association :athlete, value: current_user.athlete.id, as: :hidden %>
        <%= f.input :completed_at, as: :date, start_year: Date.today.year,
                              end_year: Date.today.year + 12,
                              order: [:day, :month, :year] %>
        <%= f.button :submit, 'Completed', class: 'btn btn-danger' %>
       <% end %>
    <% end %>
  </div>
  <% if current_user.trainer? %>
  <div class='row'>
    <div class='panel-default col-md-12'>
      <div class='panel-heading'>
        <h3 class='text-center'>Athletes Assigned to this Program</h3>
      </div>
      <div class="row">
        <div class="col-md-6 panel-body" id="prog-athlete-list">

        <%= render partial: 'program_athlete_list', locals: { :program_athletes => @program_athletes, :program => @program } %>

        </div>
        <div class="col-md-1"></div>
        <div class="col-md-4">
          <div class="dropup">
            <button class="btn btn-default dropdown-toggle" type="button" style="width: 60%" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
              Add an Athlete
              <span class="caret"></span>
            </button>
            <button class="btn btn-success close-modal-btn" style="width: 20%;" data-dismiss="modal">
              OK
            </button>
              <%= render partial: 'trainer_athletes_dropdown', locals: { :trainer_athletes => (@trainer_athletes), :program => (@program)} %>
          </div>
        </div>
        <div class="col-md-1"></div>
      </div>
    </div>
  </div>
</div>
<% end %>
